(function(e){function t(t){for(var n,a,c=t[0],i=t[1],u=t[2],d=0,l=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);p&&p(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==o[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d2315c5":"4b160e41","chunk-95bf7564":"4e0af41c"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={"chunk-95bf7564":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-2d2315c5":"31d6cfe0","chunk-95bf7564":"976421f4"}[e]+".css",o=i.p+n,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],d=u.getAttribute("data-href");if(d===n||d===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],p.parentNode.removeChild(p),r(s)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=s);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=d;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("v-app",[n("v-app-bar",{attrs:{app:"",color:"#00695C",dark:"",height:"40px"}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{src:r("99dd"),width:"37",contain:"",transition:"scale-transition"}})],1),n("span",[e._v("シナリオ検索ツール")]),n("v-spacer")],1),n("v-main",["loaded"===e.load_status?n("router-view",{attrs:{scenarioGroupList:e.scenarioGroupList,scenarioList_obj:e.scenarioList_obj,storageKey_list:e.storageKey_list}}):"loading"===e.load_status?n("div",{staticClass:"text-center"},[n("v-progress-circular",{staticClass:"ma-3",attrs:{indeterminate:"",color:"primary"}}),n("p",[e._v("読み込み中…")])],1):"downloading"===e.load_status?n("div",{staticClass:"text-center"},[n("v-progress-circular",{staticClass:"ma-3",attrs:{rotate:"-90",color:"primary",value:e.progressCircular}}),n("p",[e._v(e._s(e.progressStr))])],1):e._e()],1)],1)],1)},o=[],s=r("1da1"),c=(r("96cf"),r("dca8"),r("99af"),r("d81d"),r("d3b7"),r("3ca3"),r("ddb0"),r("4de4"),r("159b"),r("b0c0"),r("bc3a")),i=r.n(c),u=r("a002"),d=r.n(u),l={name:"App",components:{},data:function(){return{load_status:"loading",downloadStatus:{downloaded:0,max:0},scenarioList:[],scenarioList_obj:{},scenarioGroupList:[],storageKey_list:[],categories:Object.freeze({1:{name:"story",path:"Story"},2:{name:"event",path:"Event"},3:{name:"chara",path:"CharaEvent"},4:{name:"chara",path:"CrossEvent"},5:{name:"weapon",path:"WeaponEvent"},6:{name:"other",path:"Other"},7:{name:"writer",path:"Writer"}})}},computed:{progressCircular:function(){var e=this.downloadStatus;return e.downloaded/e.max*100},progressStr:function(){var e=this.downloadStatus;return"".concat(e.downloaded," / ").concat(e.max)}},methods:{dl_and_setScenario:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.get(t);case 3:return a=n.sent.data.map((function(e){return delete e.m_id,delete e.m_voiceLabel,e.m_text=e.m_text.replaceAll(/<([^>]*?)>|<\/[^>]*?>|\s/g,""),e})),n.next=6,d.a.setItem(String(e),a);case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n["catch"](0),n.next=12,setTimeout(r.dl_and_setScenario(e,t),100);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return d.a.config({name:"scenario"}),d.a.setItem("version",1),t.next=4,Promise.all([Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Object,t.next=3,i.a.get("https://database.kirafan.cn/database/ADVList.json");case 3:t.t1=t.sent.data.filter((function(e){return 5!==e.m_Category})).map((function(e){return e.m_Title=e.m_Title.replaceAll(/\n/g," "),e})),e.scenarioList=t.t0.freeze.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})))(),Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},t.next=3,i.a.get("https://database.kirafan.cn/database/ADVLibraryList.json");case 3:t.sent.data.forEach((function(e){e.m_ListName=e.m_ListName.replaceAll(/\n/g," "),r[e.m_LibraryListID]=e})),e.scenarioGroupList=Object.freeze(r);case 5:case"end":return t.stop()}}),t)})))()]);case 4:return t.next=6,d.a.keys();case 6:return e.storageKey_list=t.sent,e.downloadStatus.max=e.scenarioList.length,e.load_status="downloading",r=e.scenarioList.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=r.m_AdvID,-1!==e.storageKey_list.indexOf(String(n))){t.next=8;break}if(a=r.m_Category,!r.m_ScriptTextName){t.next=8;break}return o="https://advscript-asset.kirafan.cn/",e.categories[a].name,e.categories[a].path,r.m_ScriptTextName,t.next=8,e.dl_and_setScenario(n,o);case 8:e.downloadStatus.downloaded++;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=12,Promise.all(r);case 12:return e.scenarioList.forEach((function(t){e.scenarioList_obj[t.m_AdvID]=t})),t.next=15,d.a.keys();case 15:e.storageKey_list=t.sent,e.load_status="loaded";case 17:case"end":return t.stop()}}),t)})))()}},p=l,f=r("2877"),m=r("6544"),h=r.n(m),v=r("7496"),g=r("40dc"),b=r("adda"),_=r("f6c4"),w=r("490a"),y=r("2fa4"),x=Object(f["a"])(p,a,o,!1,null,null,null),k=x.exports;h()(x,{VApp:v["a"],VAppBar:g["a"],VImg:b["a"],VMain:_["a"],VProgressCircular:w["a"],VSpacer:y["a"]});var j=r("f309");n["a"].use(j["a"]);var L=new j["a"]({}),O=r("8c4f");n["a"].use(O["a"]);var S=function(e){return function(){return r("9dac")("./"+e)}},C=new O["a"]({routes:[{path:"/",name:"Home",component:S("Home")}]});n["a"].config.productionTip=!1,n["a"].prototype.$window=window,new n["a"]({vuetify:L,router:C,axios:i.a,localforage:d.a,render:function(e){return e(k)}}).$mount("#app")},"99dd":function(e,t,r){e.exports=r.p+"img/favicon.922de31d.png"},"9dac":function(e,t,r){var n={"./Home":["16c0","chunk-95bf7564"],"./Home/":["16c0","chunk-95bf7564"],"./Home/index":["16c0","chunk-95bf7564"],"./Home/index.vue":["16c0","chunk-95bf7564"],"./search":["efe3","chunk-2d2315c5"],"./search/":["efe3","chunk-2d2315c5"],"./search/index":["efe3","chunk-2d2315c5"],"./search/index.vue":["efe3","chunk-2d2315c5"]};function a(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return r.e(t[1]).then((function(){return r(a)}))}a.keys=function(){return Object.keys(n)},a.id="9dac",e.exports=a}});
//# sourceMappingURL=app.62122aa2.js.map